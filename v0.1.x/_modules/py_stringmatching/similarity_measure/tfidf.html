

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>py_stringmatching.similarity_measure.tfidf &mdash; py_stringmatching 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="py_stringmatching 0.1 documentation" href="../../../index.html"/>
        <link rel="up" title="Module code" href="../../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../../index.html" class="fa fa-home"> py_stringmatching</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation.html#platforms">Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation.html#installing-using-pip">Installing Using pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation.html#installing-from-source-distribution">Installing from Source Distribution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../Tutorial.html#selecting-a-similarity-measure">1. Selecting a Similarity Measure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Tutorial.html#selecting-a-tokenizer-type">2. Selecting a Tokenizer Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Tutorial.html#creating-a-tokenizer-object-and-using-it-to-tokenize-the-input-strings">3. Creating a Tokenizer Object and Using It to Tokenize the Input Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Tutorial.html#creating-a-similarity-measure-object-and-using-it-to-compute-a-similarity-score">4. Creating a Similarity Measure Object and Using It to Compute a Similarity Score</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Tutorial.html#handling-a-large-number-of-string-pairs">Handling a Large Number of String Pairs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Tutorial.html#handling-missing-values">Handling Missing Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Tutorial.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Tokenizer.html">Tokenizers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../AlphabeticTokenizer.html">Alphabetic Tokenizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../AlphanumericTokenizer.html">Alphanumeric Tokenizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../DelimiterTokenizer.html">Delimiter Tokenizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../QgramTokenizer.html">Qgram Tokenizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../WhitespaceTokenizer.html">Whitespace Tokenizer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../SimilarityMeasure.html">Similarity Measures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../Affine.html">Affine Gap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Cosine.html">Cosine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Dice.html">Dice</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../HammingDistance.html">Hamming Distance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Jaccard.html">Jaccard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Jaro.html">Jaro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../JaroWinkler.html">Jaro Winkler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Levenshtein.html">Levenshtein</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../MongeElkan.html">Monge Elkan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../NeedlemanWunsch.html">Needleman Wunsch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../OverlapCoefficient.html">Overlap Coefficient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../SmithWaterman.html">Smith Waterman</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../SoftTfIdf.html">Soft TF/IDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../TfIdf.html">TF/IDF</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">py_stringmatching</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
    <li>py_stringmatching.similarity_measure.tfidf</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for py_stringmatching.similarity_measure.tfidf</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">log</span><span class="p">,</span> <span class="n">sqrt</span>
<span class="kn">import</span> <span class="nn">collections</span>

<span class="kn">from</span> <span class="nn">py_stringmatching</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">py_stringmatching.similarity_measure.token_similarity_measure</span> <span class="kn">import</span> \
                                                    <span class="n">TokenSimilarityMeasure</span>


<div class="viewcode-block" id="TfIdf"><a class="viewcode-back" href="../../../TfIdf.html#py_stringmatching.similarity_measure.tfidf.TfIdf">[docs]</a><span class="k">class</span> <span class="nc">TfIdf</span><span class="p">(</span><span class="n">TokenSimilarityMeasure</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Computes TF/IDF measure.</span>

<span class="sd">    This measure employs the notion of TF/IDF score commonly used in information retrieval (IR) to</span>
<span class="sd">    find documents that are relevant to keyword queries. The intuition underlying the TF/IDF measure</span>
<span class="sd">    is that two strings are similar if they share distinguishing terms. See the string matching chapter in the book &quot;Principles of Data Integration&quot;</span>
<span class="sd">    </span>
<span class="sd">    Note:</span>
<span class="sd">        Currently when you create a TF/IDF similarity measure object, the dampen flag is set to False by default. In most cases, you will want to set this flag to True, so that the TF and IDF formulas use logarithmic. So when creating this object, consider setting the flag to True. This will likely be fixed in the next release. </span>

<span class="sd">    Args:</span>
<span class="sd">        corpus_list (list of lists): The corpus that will be used to compute TF and IDF values. This corpus is a list of strings, where each string has been tokenized into a list of tokens (that is, a bag of tokens). The default is set to None. In this case, when we call this TF/IDF measure on two input strings (using get_raw_score or get_sim_score), the corpus is taken to be the list of those two strings. </span>
<span class="sd">        dampen (boolean): Flag to indicate whether &#39;log&#39; should be used in TF and IDF formulas. In general this flag should be set to True. </span>

<span class="sd">    Attributes:</span>
<span class="sd">        dampen (boolean): An attribute to store the dampen flag.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">corpus_list</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dampen</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span> <span class="o">=</span> <span class="n">corpus_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__document_frequency</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__compute_document_frequency</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_size</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="p">(</span>
                                                         <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dampen</span> <span class="o">=</span> <span class="n">dampen</span>        
        <span class="nb">super</span><span class="p">(</span><span class="n">TfIdf</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

<div class="viewcode-block" id="TfIdf.get_raw_score"><a class="viewcode-back" href="../../../TfIdf.html#py_stringmatching.similarity_measure.tfidf.TfIdf.get_raw_score">[docs]</a>    <span class="k">def</span> <span class="nf">get_raw_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bag1</span><span class="p">,</span> <span class="n">bag2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Computes the raw TF/IDF score between two lists.</span>

<span class="sd">        Args:</span>
<span class="sd">            bag1,bag2 (list): Input lists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            TF/IDF score between the input lists (float).</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError : If the inputs are not lists or if one of the inputs is None.</span>

<span class="sd">        Examples:</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; # here the corpus is a list of three strings that </span>
<span class="sd">            &gt;&gt;&gt; # have been tokenized into three lists of tokens</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf([[&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;, &#39;c&#39;], [&#39;a&#39;]])</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_raw_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;, &#39;c&#39;])</span>
<span class="sd">            0.17541160386140586</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_raw_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;])</span>
<span class="sd">            0.5547001962252291</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf([[&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;, &#39;c&#39;], [&#39;a&#39;], [&#39;b&#39;]], True)</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_raw_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;, &#39;c&#39;])</span>
<span class="sd">            0.11166746710505392</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf([[&#39;x&#39;, &#39;y&#39;], [&#39;w&#39;], [&#39;q&#39;]])</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_raw_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;])</span>
<span class="sd">            0.0</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf([[&#39;x&#39;, &#39;y&#39;], [&#39;w&#39;], [&#39;q&#39;]], True)</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_raw_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;])</span>
<span class="sd">            0.0</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf()</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_raw_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;])</span>
<span class="sd">            0.7071067811865475</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># input validations</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">sim_check_for_none</span><span class="p">(</span><span class="n">bag1</span><span class="p">,</span> <span class="n">bag2</span><span class="p">)</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">sim_check_for_list_or_set_inputs</span><span class="p">(</span><span class="n">bag1</span><span class="p">,</span> <span class="n">bag2</span><span class="p">)</span>

        <span class="c"># if the strings match exactly return 1.0</span>
        <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">sim_check_for_exact_match</span><span class="p">(</span><span class="n">bag1</span><span class="p">,</span> <span class="n">bag2</span><span class="p">):</span>
            <span class="k">return</span> <span class="mf">1.0</span>

        <span class="c"># if one of the strings is empty return 0</span>
        <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">sim_check_for_empty</span><span class="p">(</span><span class="n">bag1</span><span class="p">,</span> <span class="n">bag2</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="c"># term frequency for input strings</span>
        <span class="n">tf_x</span><span class="p">,</span> <span class="n">tf_y</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="n">bag1</span><span class="p">),</span> <span class="n">collections</span><span class="o">.</span><span class="n">Counter</span><span class="p">(</span><span class="n">bag2</span><span class="p">)</span>
         
        <span class="c"># find unique elements in the input lists and their document frequency </span>
        <span class="n">local_df</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">tf_x</span><span class="p">:</span>
            <span class="n">local_df</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">=</span> <span class="n">local_df</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">tf_y</span><span class="p">:</span>
            <span class="n">local_df</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">=</span> <span class="n">local_df</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c"># if corpus is not provided treat input string as corpus</span>
        <span class="n">curr_df</span><span class="p">,</span> <span class="n">corpus_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">local_df</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="p">(</span>
                                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__document_frequency</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_size</span><span class="p">))</span>

        <span class="n">idf_element</span><span class="p">,</span> <span class="n">v_x</span><span class="p">,</span> <span class="n">v_y</span><span class="p">,</span> <span class="n">v_x_y</span><span class="p">,</span> <span class="n">v_x_2</span><span class="p">,</span> <span class="n">v_y_2</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> 
                                                      <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="c"># tfidf calculation</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">local_df</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">df_element</span> <span class="o">=</span> <span class="n">curr_df</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">df_element</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">idf_element</span> <span class="o">=</span> <span class="n">corpus_size</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">df_element</span>
            <span class="n">v_x</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">element</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tf_x</span> <span class="k">else</span> <span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="n">idf_element</span><span class="p">)</span> <span class="o">*</span> <span class="n">log</span><span class="p">(</span><span class="n">tf_x</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dampen</span> <span class="k">else</span> <span class="p">(</span>
                  <span class="n">idf_element</span> <span class="o">*</span> <span class="n">tf_x</span><span class="p">[</span><span class="n">element</span><span class="p">])</span>
            <span class="n">v_y</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">element</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tf_y</span> <span class="k">else</span> <span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="n">idf_element</span><span class="p">)</span> <span class="o">*</span> <span class="n">log</span><span class="p">(</span><span class="n">tf_y</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dampen</span> <span class="k">else</span> <span class="p">(</span>
                  <span class="n">idf_element</span> <span class="o">*</span> <span class="n">tf_y</span><span class="p">[</span><span class="n">element</span><span class="p">])</span>
            <span class="n">v_x_y</span> <span class="o">+=</span> <span class="n">v_x</span> <span class="o">*</span> <span class="n">v_y</span>
            <span class="n">v_x_2</span> <span class="o">+=</span> <span class="n">v_x</span> <span class="o">*</span> <span class="n">v_x</span>
            <span class="n">v_y_2</span> <span class="o">+=</span> <span class="n">v_y</span> <span class="o">*</span> <span class="n">v_y</span>

        <span class="k">return</span> <span class="mf">0.0</span> <span class="k">if</span> <span class="n">v_x_y</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">v_x_y</span> <span class="o">/</span> <span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">v_x_2</span><span class="p">)</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">v_y_2</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="TfIdf.get_sim_score"><a class="viewcode-back" href="../../../TfIdf.html#py_stringmatching.similarity_measure.tfidf.TfIdf.get_sim_score">[docs]</a>    <span class="k">def</span> <span class="nf">get_sim_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bag1</span><span class="p">,</span> <span class="n">bag2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Computes the normalized TF/IDF similarity score between two lists. Simply call get_raw_score.</span>

<span class="sd">        Args:</span>
<span class="sd">            bag1,bag2 (list): Input lists.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Normalized TF/IDF similarity score between the input lists (float).</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError : If the inputs are not lists or if one of the inputs is None.</span>

<span class="sd">        Examples:</span>
<span class="sd">            </span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf([[&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;, &#39;c&#39;], [&#39;a&#39;]])</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_sim_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;, &#39;c&#39;])</span>
<span class="sd">            0.17541160386140586</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_sim_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;])</span>
<span class="sd">            0.5547001962252291</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf([[&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;, &#39;c&#39;], [&#39;a&#39;], [&#39;b&#39;]], True)</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_sim_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;, &#39;c&#39;])</span>
<span class="sd">            0.11166746710505392</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf([[&#39;x&#39;, &#39;y&#39;], [&#39;w&#39;], [&#39;q&#39;]])</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_sim_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;])</span>
<span class="sd">            0.0</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf([[&#39;x&#39;, &#39;y&#39;], [&#39;w&#39;], [&#39;q&#39;]], True)</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_sim_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;])</span>
<span class="sd">            0.0</span>
<span class="sd">            &gt;&gt;&gt; tfidf = TfIdf()</span>
<span class="sd">            &gt;&gt;&gt; tfidf.get_sim_score([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;], [&#39;a&#39;])</span>
<span class="sd">            0.7071067811865475</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_raw_score</span><span class="p">(</span><span class="n">bag1</span><span class="p">,</span> <span class="n">bag2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="TfIdf.get_dampen"><a class="viewcode-back" href="../../../TfIdf.html#py_stringmatching.similarity_measure.tfidf.TfIdf.get_dampen">[docs]</a>    <span class="k">def</span> <span class="nf">get_dampen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get dampen flag.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dampen flag (boolean).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dampen</span>
</div>
<div class="viewcode-block" id="TfIdf.get_corpus_list"><a class="viewcode-back" href="../../../TfIdf.html#py_stringmatching.similarity_measure.tfidf.TfIdf.get_corpus_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_corpus_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get corpus list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            corpus list (list of lists).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span>
</div>
<div class="viewcode-block" id="TfIdf.set_dampen"><a class="viewcode-back" href="../../../TfIdf.html#py_stringmatching.similarity_measure.tfidf.TfIdf.set_dampen">[docs]</a>    <span class="k">def</span> <span class="nf">set_dampen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dampen</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set dampen flag.</span>

<span class="sd">        Args:</span>
<span class="sd">            dampen (boolean): Flag to indicate whether &#39;log&#39; should be applied to TF and IDF formulas.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dampen</span> <span class="o">=</span> <span class="n">dampen</span>
        <span class="k">return</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="TfIdf.set_corpus_list"><a class="viewcode-back" href="../../../TfIdf.html#py_stringmatching.similarity_measure.tfidf.TfIdf.set_corpus_list">[docs]</a>    <span class="k">def</span> <span class="nf">set_corpus_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">corpus_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set corpus list.</span>

<span class="sd">        Args:</span>
<span class="sd">            corpus_list (list of lists): Corpus list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span> <span class="o">=</span> <span class="n">corpus_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__document_frequency</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__compute_document_frequency</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_size</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="p">(</span>
                                                         <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">True</span>
</div>
    <span class="k">def</span> <span class="nf">__compute_document_frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__corpus_list</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">document</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__document_frequency</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> 
                        <span class="bp">self</span><span class="o">.</span><span class="n">__document_frequency</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span></div>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, py_stringmatching Team.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>